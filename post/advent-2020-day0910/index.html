<!DOCTYPE html>
<html lang="en-us">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>A Teacher looks at Advent of Code 2020 - days 9 and 10 - C&#39;est la Z</title>
<meta name="description" content="">

<link rel="icon" type="image/x-icon" href="https://cestlaz.github.io/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://cestlaz.github.io/favicon.png">

<link rel="stylesheet" href="https://cestlaz.github.io/css/style.css?rnd=1646657009" />



<meta property="og:title" content="A Teacher looks at Advent of Code 2020 - days 9 and 10" />
<meta property="og:description" content="As we get closer to the end of the semester and time becomes scarcer I&#39;m wondering how many more I&#39;ll finish. Barely had time to do days 9 and 10.
 Not much to say about day 9 Part one was basically a rehash of day 1 part 1 but with a sliding widow. Part 2? I just brute force tried all the subranges. I meant to go back to try to improve the solution but didn&#39;t have a chance." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cestlaz.github.io/post/advent-2020-day0910/" />
<meta property="article:published_time" content="2020-12-10T16:52:45-04:00" />
<meta property="article:modified_time" content="2020-12-10T16:52:45-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A Teacher looks at Advent of Code 2020 - days 9 and 10"/>
<meta name="twitter:description" content="As we get closer to the end of the semester and time becomes scarcer I&#39;m wondering how many more I&#39;ll finish. Barely had time to do days 9 and 10.
 Not much to say about day 9 Part one was basically a rehash of day 1 part 1 but with a sliding widow. Part 2? I just brute force tried all the subranges. I meant to go back to try to improve the solution but didn&#39;t have a chance."/>








    
</head>
<body>
<script id="dsq-count-scr" src="//cestlaz.disqus.com/count.js" async></script>


  <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header> 
            
                <h1 class="site-header">
    <a href="/">C&#39;est la Z</a>
</h1>
<nav>
    
    
    <a class="" href="https://cestlaz.github.io/" title="">Home</a>
    
    <a class="" href="https://cestlaz.github.io/stories/emacs" title="">Emacs</a>
    
    <a class="" href="https://cestlaz.github.io/archive" title="">Archive</a>
    
    <a class="" href="https://cestlaz-nikola.github.io/" title="">Old Blog</a>
    
    <a class="" href="https://cestlaz.github.io/about" title="">About</a>
    
    <a class="" href="https://cestlaz.github.io/rss.xml" title="">RSS</a>
    
</nav>

            
        </header>
        <main id="main" tabindex="-1"> 
            

    <article class="post">
        <header>
            <h1 class="post-title">A Teacher looks at Advent of Code 2020 - days 9 and 10</h1>
        </header>
        <div class="content">
            <p>
As we get closer to the end of the semester and time becomes scarcer
I&#39;m wondering how many more I&#39;ll finish. Barely had time to do days 9
and 10.</p>
<p>
Not much to say about <a href="https://adventofcode.com/2020/day/9">day 9</a> Part one was basically a rehash of day 1
part 1 but with a sliding widow. Part 2? I just brute force tried all
the subranges. I meant to go back to try to improve the solution but
didn&#39;t have a chance. </p>
<p>
Clojure code can be found <a href="https://github.com/zamansky/advent2020/blob/main/src/day09.clj">here</a>. </p>
<p>
<a href="https://adventofcode.com/2020/day/10">Day 10</a> was more interesting. </p>
<p>
I misread part 1 but ultimately, my solution was to: </p>
<ol>
<li>
<p>read in the data</p>
</li>
<li>
<p>sort it</p>
</li>
<li>
<p>prepend a 0</p>
</li>
<li>
<p>append an additional value of the max + 3 to the end</p>
</li>
</ol>
<p>Then loop through comparing adjacent values and keep track of the
differences which can be 1, 2, or 3. </p>
<p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data<span style="color:#f92672">=</span>[ int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> open(<span style="color:#e6db74">&#34;../data/sample10-1.dat&#34;</span>)<span style="color:#f92672">.</span>readlines()]
data<span style="color:#f92672">.</span>sort()
data<span style="color:#f92672">.</span>insert(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>)
data<span style="color:#f92672">.</span>append(max(data)<span style="color:#f92672">+</span><span style="color:#ae81ff">3</span>)

j<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>]
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(data)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
    diff<span style="color:#f92672">=</span>data[i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span>data[i]
    j[diff<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>j[diff<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>

<span style="color:#66d9ef">print</span>(j)</code></pre></div></p>
<p>
Part 2 was where the fun starts - how many combinations of adapters
will take you from the start to the end.</p>
<p>
For example, if we had adapters with voltages 1,4,5,6 given the
problem constraints that you can only connect an adapter to another
with a &#34;joltage&#34; of up to three less, you can only use the 1 voltage 1
way (coming from the source of 0).</p>
<p>
4 can connect to only 1 so it can only be used 1 way.</p>
<p>
5 can connect to 4 so it too can only be used 1 way.</p>
<p>
6 is a change, it can connect to 5 or 4 so you could chain either
6–&gt;5–&gt;4–&gt;1 or 6–&gt;4–&gt;1 so you can get to 6 two ways. </p>
<p>
If a student knows recursion and recursive search it&#39;s easy enough to
code something that tries all the paths but it&#39;s going to get very
slow very fast.</p>
<p>
With a couple of insights though this can lead to a nice dynamic
programming type solution. </p>
<p>
First thing to notice is that, similar to day 7, instead of looking at
how many adapters a lower joltage adapter can lead to we can look at how
many lower joltage adapters a given adapter could have come from. </p>
<p>
To do this, we can look at the adapters as a graph. We can build a
dictionary where the keys are the adapter joltages and the entries are
the lower joltage adapters it can connect with:</p>
<p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">build_reverse_map</span>(data):
    graph<span style="color:#f92672">=</span>{}
    data <span style="color:#f92672">=</span> data[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(data)):
        current <span style="color:#f92672">=</span> data[i]
        j<span style="color:#f92672">=</span>i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">while</span> (j<span style="color:#f92672">&lt;</span>len(data) <span style="color:#f92672">and</span> data[i] <span style="color:#f92672">-</span> data[j] <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">3</span>):
            j<span style="color:#f92672">=</span>j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
        graph[current]<span style="color:#f92672">=</span>data[i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>:j]
    <span style="color:#66d9ef">return</span> graph

rmap <span style="color:#f92672">=</span> build_reverse_map(data)</code></pre></td></tr></table>
</div>
</div> </p>
<p>
Line 3 reverses the list then for each item in the list, lines 6
through 8 find the adapters it can connect with. </p>
<p>
The next insight is that instead of calculating all the possibilities
we can build them a step at a time. </p>
<p>
Consider the first voltage from our above example of 1,4,5,6.</p>
<p>
1 – it can only go to 0 so 0 is its only &#34;neighbor&#34; in the graph. We
can only get there 1 way so we can store 1 in ways[1].</p>
<p>
4 – same deal - its only neighbor is 1. You can only get to 1 one way
so you can only get to 4 1 way - store it in ways[4]</p>
<p>
5 – same deal, ways[5] = 1.</p>
<p>
6 - now six is different. It has 2 neighbors - 5 and 4. You can get to
5 one way and 4 one way so we can get to 6 two ways (the sum of the
ways to get to each of it&#39;s neighbors). Store that in ways[6]</p>
<p>
Go through all the nodes and then ways[the last node] will have your
answer:  </p>
<p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">ways<span style="color:#f92672">=</span>{}
<span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> data:
    ways[d]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>

<span style="color:#66d9ef">for</span> d <span style="color:#f92672">in</span> data[<span style="color:#ae81ff">1</span>:]:
    neighbors <span style="color:#f92672">=</span> rmap[d]
    sum <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">for</span> n <span style="color:#f92672">in</span> neighbors:
        sum <span style="color:#f92672">=</span> sum <span style="color:#f92672">+</span> ways[n]
    ways[d]<span style="color:#f92672">=</span>sum</code></pre></td></tr></table>
</div>
</div> </p>
<p>
Relatively straightforward and lightning fast. Dynamic programming
can be really hard to teach but I think this problem might be a good
one to do with an advanced data structures class. </p>
<p>
For comparison, you can find the clojure code <a href="https://github.com/zamansky/advent2020/blob/main/src/day10.clj">here</a>. </p>
<p>
Fun problem today. Looking forward to tomorrow.</p>

        </div>
        


<div class="post-info">
    
        <div class="post-date">2020-12-10</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://cestlaz.github.io/categories/AOC">AOC</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://cestlaz.github.io/tags/emacs">#emacs</a></li>
                    
                        <li><a href="https://cestlaz.github.io/tags/aoc">#AOC</a></li>
                    
                        <li><a href="https://cestlaz.github.io/tags/advent-of-code">#Advent of Code</a></li>
                    
                </ul>
        
    </div>
</div>

    </article>

    

    
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "cestlaz" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    


        </main>
        <footer>
            
                
                

                <p>© 2022<br>
Powered by <a target="_blank" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.
</p>
            
        </footer>
    </div>
</body>
</html>
